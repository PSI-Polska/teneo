<?xml version="1.0"?>
<project name="TeneoMaven">

	<macrodef name="teneo.maven">
		<attribute name="name"/>
		<sequential>
			<echo message="Creating maven jar and pom for @{name}"/>
			
			<property name="mavenVersion" value="${teneo.version}-${versionQualifier}"/>
			<property name="teneoVersion" value="${teneo.version}.${versionQualifier}"/>
			<property name="eclipse.jarFile" value="${rootPath}/output/@{name}_${teneo.version}-osgi.bundle/jar/@{name}_${teneoVersion}.jar"/>
			<property name="eclipse.sourceJarFile" value="${rootPath}/output/@{name}_${teneo.version}-osgi.bundle/source.jar/@{name}.source_${teneoVersion}.jar"/>
			<property name="maven.jarFile" value="${mavenPath}/@{name}-${mavenVersion}.jar"/>
			<property name="maven.sourceJarFile" value="${mavenPath}/@{name}-${mavenVersion}-sources.jar"/>
			<property name="maven.pomFile" value="${mavenPath}/@{name}-${mavenVersion}.pom"/>
			<property name="maven.snapshot.jarFile" value="${mavenPath}/@{name}-${teneo.version}-SNAPSHOT.jar"/>
			<property name="maven.snapshot.sourceJarFile" value="${mavenPath}/@{name}-${teneo.version}-SNAPSHOT-sources.jar"/>
			<property name="maven.snapshot.pomFile" value="${mavenPath}/@{name}-${teneo.version}-SNAPSHOT.pom"/>
			
			<copy file="${eclipse.jarFile}" tofile="${maven.jarFile}"/>
			<copy file="${eclipse.sourceJarFile}" tofile="${maven.sourceJarFile}"/>
			
			<copy file="${eclipse.jarFile}" tofile="${maven.snapshot.jarFile}"/>
			<copy file="${eclipse.sourceJarFile}" tofile="${maven.snapshot.sourceJarFile}"/>
			
			<echo file="${maven.pomFile}"> 
			   <![CDATA[ 
				<?xml version="1.0" encoding="UTF-8"?>
				<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		 				<modelVersion>4.0.0</modelVersion>
		 				<groupId>org.eclipse.emf.teneo</groupId>
		 				<artifactId>@{name}</artifactId>
		 				<name>@{name}</name>
		 				<version>${mavenVersion}</version>
		 				<description>http://wiki.eclipse.org/Teneo/Hibernate</description>
				</project>
				]]> 
			</echo> 
			
			<echo file="${maven.snapshot.pomFile}"> 
			   <![CDATA[ 
				<?xml version="1.0" encoding="UTF-8"?>
				<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		 				<modelVersion>4.0.0</modelVersion>
		 				<groupId>org.eclipse.emf.teneo</groupId>
		 				<artifactId>@{name}</artifactId>
		 				<name>@{name}</name>
		 				<version>${teneoVersion}-SNAPSHOT</version>
		 				<description>http://wiki.eclipse.org/Teneo/Hibernate</description>
				</project>
				]]> 
			</echo> 
		</sequential>
	</macrodef>
</project>
