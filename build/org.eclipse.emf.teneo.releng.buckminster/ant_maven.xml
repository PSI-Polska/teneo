<?xml version="1.0"?>
<project name="TeneoMaven">

	<macrodef name="teneo.maven">
		<attribute name="name" />
		<sequential>
			<echo message="Creating maven jar and pom for @{name}" />

			<copy file="${rootPath}/output/@{name}_${teneo.version}-osgi.bundle/jar/@{name}_${teneoVersion}.jar" tofile="${mavenPath}/@{name}-${mavenVersion}.jar" />
			<copy file="${rootPath}/output/@{name}_${teneo.version}-osgi.bundle/source.jar/@{name}.source_${teneoVersion}.jar" tofile="${mavenPath}/@{name}-${mavenVersion}-sources.jar" />

			<copy file="${rootPath}/output/@{name}_${teneo.version}-osgi.bundle/jar/@{name}_${teneoVersion}.jar" tofile="${mavenPath}/@{name}-${teneo.version}-SNAPSHOT.jar" />
			<copy file="${rootPath}/output/@{name}_${teneo.version}-osgi.bundle/source.jar/@{name}.source_${teneoVersion}.jar" tofile="${mavenPath}/@{name}-${teneo.version}-SNAPSHOT-sources.jar" />

			<echo file="${mavenPath}/@{name}-${mavenVersion}.pom">
				<![CDATA[ 
				<?xml version="1.0" encoding="UTF-8"?>
				<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<modelVersion>4.0.0</modelVersion>
					<groupId>org.eclipse.emf.teneo</groupId>
					<artifactId>@{name}</artifactId>
					<name>@{name}</name>
					<version>${mavenVersion}</version>
					<description>http://wiki.eclipse.org/Teneo/Hibernate</description>
				</project>
				]]> 
			</echo>

			<echo file="${mavenPath}/@{name}-${teneo.version}-SNAPSHOT.pom">
				<![CDATA[ 
				<?xml version="1.0" encoding="UTF-8"?>
				<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
					<modelVersion>4.0.0</modelVersion>
					<groupId>org.eclipse.emf.teneo</groupId>
					<artifactId>@{name}</artifactId>
					<name>@{name}</name>
					<version>${teneoVersion}-SNAPSHOT</version>
					<description>http://wiki.eclipse.org/Teneo/Hibernate</description>
				</project>
				]]> 
			</echo>
		</sequential>
	</macrodef>
</project>
