<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.7">
<meta name="Forrest-skin-name" content="elver4">
<style type="text/css">
          /*  */
          @import "../skin/tigris.css";
          @import "../skin/quirks.css";
          @import "../skin/inst.css";
         /*   */
        </style>
<link media="print" href="../skin/print.css" type="text/css" rel="stylesheet">
<link href="../skin/forrest.css" type="text/css" rel="stylesheet">
<link rel="shortcut icon" href="../">
<script type="text/javascript" src="../skin/tigris.js"></script><script src="../skin/menu.js" language="javascript" type="text/javascript"></script>
<title>EJB3 Annotation examples</title>
<meta content="text/css" http-equiv="Content-style-type">
</head>
<body class="composite" onload="focus()">
<div id="banner">
<table width="100%" cellpadding="8" cellspacing="0" border="0">
<tr>
<td align="left">
<div>
<a href="http://www.elver.org"><img class="logoImage" alt="Elver Store" src="../images/ELV2.gif"></a>
</div>
<span class="alt">Elver Store</span></td><td align="center">
<div>
<a href="http://www.elver.org/"><img class="logoImage" alt="Elver" src="../images/empty.gif"></a>
</div>
</td><td valign="top" align="right">
<div class="right" align="right" id="login">
<form target="_blank" action="http://www.google.com/search" method="get">
<select name="as_sitesearch"><option value="">Search...</option><option value="www.elver.org">The elver site</option><option value="">The web</option></select> for
		      <input size="15" name="as_q" id="query" type="text"><input name="Search" value="Go" type="submit">
</form>
</div>
</td>
</tr>
</table>
</div>
<div id="toptabs" class="tabs">
<table border="0" cellspacing="0" cellpadding="4">
<tr>
<td><a class="base-selected" href="../index.html">Home</a></td><td><a class="base-selected" href="../hibernate/index.html">EMF Hibernate</a></td><th><a class="base-selected" href="../jpox/index.html">EMF JDO/JPOX</a></th><td><a class="base-selected" href="../services/index.html">Services</a></td>
</tr>
</table>
</div>
<table width="100%" border="0" cellpadding="0" cellspacing="0" id="breadcrumbs">
<tr>
<td></td><td>
<div class="published" align="right">
<script type="text/javascript" language="JavaScript"><!--
                 document.write("Published: " + document.lastModified);
                 //  --></script>
</div>
</td>
</tr>
</table>
<table id="main" width="100%" cellpadding="4" cellspacing="0" border="0">
<tr valign="top">
<td style="padding: 0px" width="20%" id="leftcol">
<table width="100%" class="menuarea" cellspacing="0" cellpadding="0">
<tr>
<td width="6px" valign="top">
<table border="0" cellpadding="0" cellspacing="0" class="leftpagemargin">
<tr>
<td class="subborder trail">&nbsp;</td>
</tr>
</table>
</td><td class="dialog">
<div class="menu">
<div onclick="SwitchMenu('menu_1.1')" id="menu_1.1Title" class="menutitle">Home</div>
<div id="menu_1.1" class="menuitemgroup">
<div class="menuitem">
<a href="../jpox/index.html">Introduction</a>
</div>
<div class="menuitem">
<a href="../jpox/features.html">Features</a>
</div>
<div class="menuitem">
<a href="../jpox/status.html">Status</a>
</div>
<div class="menuitem">
<a href="../jpox/overview.html">Overview</a>
</div>
<div class="menuitem">
<a href="../jpox/changelog.html">Changelog</a>
</div>
<div class="menuitem">
<a href="../jpox/installation.html">Download &amp; Install</a>
</div>
<div class="menuitem">
<a href="../jpox/knownissues.html">Known Issues</a>
</div>
<div class="menuitem">
<a href="../jpox/quick_tutorial.html">Quick Start</a>
</div>
<div class="menuitem">
<a href="../jpox/license.html">License</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.2')" id="menu_1.2Title" class="menutitle">Library Tutorial</div>
<div id="menu_1.2" class="menuitemgroup">
<div class="menuitem">
<a href="../jpox/tutorial1/tutorial1_intro.html">Introduction</a>
</div>
<div class="menuitem">
<a href="../jpox/tutorial1/tutorial1_1.html">Generate OR Mapping File</a>
</div>
<div class="menuitem">
<a href="../jpox/tutorial1/tutorial1_2.html">Create and Store EMF Object</a>
</div>
<div class="menuitem">
<a href="../jpox/tutorial1/tutorial1_3.html">Retrieve EMF Objects</a>
</div>
<div class="menuitem">
<a href="../jpox/tutorial1/tutorial1_4.html">Query EMF Objects</a>
</div>
<div class="menuitem">
<a href="../jpox/tutorial1/tutorial1_5.html">Using EMF/JPOX Resources</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.3')" id="menu_1.3Title" class="menutitle">Library Editor tutorial</div>
<div id="menu_1.3" class="menuitemgroup">
<div class="menuitem">
<a href="../jpox/tutorial2/tutorial2_intro.html">Introduction</a>
</div>
<div class="menuitem">
<a href="../jpox/tutorial2/tutorial2_1.html">Initialize the Library Editor</a>
</div>
<div class="menuitem">
<a href="../jpox/tutorial2/tutorial2_2.html">Run the Library Editor</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.4')" id="menu_1.4Title" class="menutitle">Details</div>
<div id="menu_1.4" class="menuitemgroup">
<div class="menuitem">
<a href="../jpox/inheritance.html">Inheritance Mapping</a>
</div>
<div class="menuitem">
<a href="../jpox/jpox_details.html">JPOX Details</a>
</div>
<div class="menuitem">
<a href="../jpox/jpoxresources.html">EMF/JPOX Resources</a>
</div>
<div class="menuitem">
<a href="../jpox/resource_utility.html">Resource Utility</a>
</div>
<div class="menuitem">
<a href="../jpox/jpoxdatastore.html">JpoxDataStore</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.5')" id="menu_selected_1.5Title" class="menutitle">Annotations (EJB3)</div>
<div id="menu_selected_1.5" class="selectedmenuitemgroup">
<div class="menuitem">
<a href="../jpox/ejb3_features.html">Supported Ann.</a>
</div>
<div class="menuitem">
<a href="../jpox/ejb3_format.html">EAnn. Format</a>
</div>
<div class="menupage">
<div class="menupagetitle">EAnn. Examples</div>
</div>
</div>
<div onclick="SwitchMenu('menu_1.6')" id="menu_1.6Title" class="menutitle">XML Schema</div>
<div id="menu_1.6" class="menuitemgroup">
<div class="menuitem">
<a href="../jpox/features_details.html">XML Schema Features</a>
</div>
<div class="menuitem">
<a href="../jpox/featuremap.html">Feature Map/Mixed Content</a>
</div>
<div class="menuitem">
<a href="../jpox/substitution.html">Substitution Group</a>
</div>
<div class="menuitem">
<a href="../jpox/anytype.html">xsd:any/xsd:anyType</a>
</div>
<div class="menuitem">
<a href="../jpox/schema_list.html">XML Schema Examples</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.7')" id="menu_1.7Title" class="menutitle">Support</div>
<div id="menu_1.7" class="menuitemgroup">
<div class="menuitem">
<a href="../jpox/troubleshooting.html">Troubleshooting</a>
</div>
<div class="menuitem">
<a href="../jpox/upgrading.html">Upgrading</a>
</div>
<div class="menuitem">
<a href="../jpox/mailinglist.html">Mailinglist</a>
</div>
<div class="menuitem">
<a href="../jpox/emfjpoxsupport.html">EMF/JPOX Support</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.8')" id="menu_1.8Title" class="menutitle">Developer</div>
<div id="menu_1.8" class="menuitemgroup">
<div class="menuitem">
<a href="../jpox/svn.html">CVS</a>
</div>
<div class="menuitem">
<a href="../jpox/testcases.html">Test cases</a>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td></td><td>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td class="border bottom-left"></td><td class="border bottomborder"></td><td class="border bottom-right"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan="2" height="10"></td>
</tr>
</table>
<table></table>
<table></table>
<div class="strut">&nbsp;</div>
</td><td>
<div class="content">
<div id="bodycol">
<div id="apphead">
<h2>
<em>EJB3 Annotation examples</em>
</h2>
</div>
<div class="app" id="projecthome">
<ul class="minitoc">
<li>
<a href="#id">Id Annotation</a>
</li>
<li>
<a href="#compositeid">Composite Id in Uml</a>
</li>
<li>
<a href="#column">Table and Column annotations</a>
</li>
<li>
<a href="#mtm">ManyToMany Annotations</a>
</li>
<li>
<a href="#inheritance">Inheritance and Discriminator Annotations</a>
</li>
<li>
<a href="#other">Other examples</a>
</li>
</ul>
		
<a name="N1000E"></a><a name="id"></a>
<div class="h3">
<h3>Id Annotation</h3>
			
			
<p>An example with a generated id, note the definition of the Generator on global level.</p>
			
<pre class="code">
&lt;xsd:schema targetNamespace="http://www.elver.org/samples/emf/annotations/id"
	xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore"
	xmlns:lib="http://www.elver.org/samples/emf/annotations/id"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;

	&lt;xsd:annotation&gt;
		&lt;xsd:appinfo source="http://ejb.elver.org/SequenceGenerator" 
				ecore:key="name"&gt;GENERATOR&lt;/xsd:appinfo&gt;
		&lt;xsd:appinfo source="http://ejb.elver.org/SequenceGenerator" 
				ecore:key="sequenceName"&gt;mySequenceName&lt;/xsd:appinfo&gt;
	&lt;/xsd:annotation&gt;

	&lt;xsd:complexType name="SimpleID"&gt;
	&lt;xsd:sequence&gt;
		&lt;xsd:element name="autoID" type="xsd:long"&gt;
			&lt;xsd:annotation&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/Id"&gt;true&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/GeneratedValue"&gt;true&lt;/xsd:appinfo&gt;
			&lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
	&lt;/xsd:sequence&gt;
	&lt;/xsd:complexType&gt;
  
	&lt;xsd:complexType name="TableID"&gt;
	&lt;xsd:sequence&gt;
		&lt;xsd:element name="myid" type="xsd:long"&gt;
			&lt;xsd:annotation&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/Id"&gt;true&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/GeneratedValue" 
						ecore:key="strategy"&gt;TABLE&lt;/xsd:appinfo&gt;
			&lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
	&lt;/xsd:sequence&gt;
	&lt;/xsd:complexType&gt;
  
	&lt;xsd:complexType name="IdentityID"&gt;
	&lt;xsd:sequence&gt;
		&lt;xsd:element name="myid" type="xsd:long"&gt;
			&lt;xsd:annotation&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/Id"&gt;true&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/GeneratedValue" 
						ecore:key="strategy"&gt;IDENTITY&lt;/xsd:appinfo&gt;
			&lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
	&lt;/xsd:sequence&gt;
	&lt;/xsd:complexType&gt;
&lt;/xsd:schema&gt;
			</pre>
		
</div>
		
<a name="N1001C"></a><a name="compositeid"></a>
<div class="h3">
<h3>Composite Id in Uml</h3>
			
			
<p>The annotation for a composite id using a specific id class. Please read the documentation of jpox for
			all the requirements which apply to the composite id class.</p>
			
<pre class="code">
http://ejb.elver.org/IdClass value='org.elver.samples.emf.annotations.compositeid.PersonID'
			</pre>
		
</div>
		
<a name="N1002A"></a><a name="column"></a>
<div class="h3">
<h3>Table and Column annotations</h3>
			
			
<p>An example of the use of a Table annotation at EClass level and a Column annotation:</p>
			
<pre class="code">
&lt;xsd:complexType name="Book"&gt;
	&lt;xsd:annotation&gt;
		&lt;xsd:appinfo source="http://ejb.elver.org/Table" 
					ecore:key="name"&gt;MYBOOKTABLE&lt;/xsd:appinfo&gt;
	&lt;/xsd:annotation&gt;
	&lt;xsd:sequence&gt;
		&lt;xsd:element name="title" type="xsd:string"&gt;
			&lt;xsd:annotation&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="name"&gt;titel&lt;/xsd:appinfo&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="unique"&gt;true&lt;/xsd:appinfo&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="length"&gt;25&lt;/xsd:appinfo&gt;
		   	&lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
	   	&lt;xsd:element name="pages" type="xsd:int"&gt;
			&lt;xsd:annotation&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="updatable"&gt;false&lt;/xsd:appinfo&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="insertable"&gt;false&lt;/xsd:appinfo&gt;
		    &lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
	  	&lt;xsd:element name="weight" type="xsd:decimal"&gt;
			&lt;xsd:annotation&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="name"&gt;GEWICHT&lt;/xsd:appinfo&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="nullable"&gt;true&lt;/xsd:appinfo&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="precision"&gt;5&lt;/xsd:appinfo&gt;
			&lt;xsd:appinfo source="http://ejb.elver.org/Column" 
					ecore:key="scale"&gt;2&lt;/xsd:appinfo&gt;
	    		&lt;/xsd:annotation&gt;
	  	&lt;/xsd:element&gt;
		&lt;xsd:element name="author" type="xsd:string"/&gt;
	&lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;
			</pre>
			
</div>
		
<a name="N10038"></a><a name="mtm"></a>
<div class="h3">
<h3>ManyToMany Annotations</h3>
			
			
<p>An example of the use of a ManyToMany annotation:</p>
			
<pre class="code">
&lt;xsd:complexType name="Cntr"&gt;
	&lt;xsd:sequence&gt;
		xsd:element name="rght" type="xsd:IDREF" ecore:reference="this:Rght" 
				maxOccurs="unbounded" ecore:opposite="cntr"&gt;
			&lt;xsd:annotation&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="fetch"&gt;EAGER&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="cascade"&gt;MERGE PERSIST&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="targetEntity"&gt;Rght&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/JoinTable" 
						ecore:key="name"&gt;RightCenter&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://annotation.elver.org/Indexed" 
						ecore:key="value"&gt;false&lt;/xsd:appinfo&gt;
			&lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
	  	&lt;xsd:element name="lft" type="xsd:IDREF" ecore:reference="this:Lft" 
	  			maxOccurs="unbounded" ecore:opposite="cntr"&gt;
			&lt;xsd:annotation&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="fetch"&gt;EAGER&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="cascade"&gt;MERGE PERSIST&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="targetEntity"&gt;Lft&lt;/xsd:appinfo&gt;
			&lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
    	&lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:complexType name="Lft"&gt;
	&lt;xsd:sequence&gt;
		&lt;xsd:element name="cntr" type="xsd:IDREF" ecore:reference="this:Cntr" 
			maxOccurs="unbounded" ecore:opposite="lft"&gt;
			&lt;xsd:annotation&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="fetch"&gt;LAZY&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="cascade"&gt;MERGE PERSIST&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="targetEntity"&gt;Cntr&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="mappedBy"&gt;lft&lt;/xsd:appinfo&gt;
			&lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
	&lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:complexType name="Rght"&gt;
	&lt;xsd:sequence&gt; 
		&lt;xsd:element name="cntr" type="xsd:IDREF" ecore:reference="this:Cntr" 
					maxOccurs="unbounded" ecore:opposite="rght"&gt;
			&lt;xsd:annotation&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="fetch"&gt;LAZY&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="cascade"&gt;MERGE PERSIST&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="targetEntity"&gt;Cntr&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/ManyToMany" 
						ecore:key="mappedBy"&gt;rght&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://ejb.elver.org/JoinTable" 
						ecore:key="name"&gt;RightCenter&lt;/xsd:appinfo&gt;
				&lt;xsd:appinfo source="http://annotation.elver.org/Indexed" 
						ecore:key="value"&gt;false&lt;/xsd:appinfo&gt;
			&lt;/xsd:annotation&gt;
		&lt;/xsd:element&gt;
	&lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;
			</pre>
			
</div>
		
<a name="N10046"></a><a name="inheritance"></a>
<div class="h3">
<h3>Inheritance and Discriminator Annotations</h3>
			
			
<p>An example of the use of an Inheritance and Discriminator related annotations:</p>
			
<pre class="code">
&lt;xsd:complexType name="Price"&gt;
	&lt;xsd:annotation&gt;
		&lt;xsd:appinfo source="http://ejb.elver.org/Table" 
				ecore:key="name"&gt;MYPRICE&lt;/xsd:appinfo&gt;
		&lt;xsd:appinfo source="http://ejb.elver.org/Inheritance" 
				ecore:key="strategy"&gt;SINGLE_TABLE&lt;/xsd:appinfo&gt;
		&lt;xsd:appinfo source="http://ejb.elver.org/DiscriminatorColumn" 
				ecore:key="name"&gt;DISCRIMINATOR&lt;/xsd:appinfo&gt;
		&lt;xsd:appinfo source="http://ejb.elver.org/DiscriminatorColumn" 
				ecore:key="discriminatorType"&gt;STRING&lt;/xsd:appinfo&gt;
		&lt;xsd:appinfo source="http://ejb.elver.org/DiscriminatorValue" 
				ecore:key="value"&gt;myPrice&lt;/xsd:appinfo&gt;
	&lt;/xsd:annotation&gt;
	&lt;xsd:sequence&gt;
		&lt;xsd:element name="name" type="xsd:string"/&gt;
		&lt;xsd:element name="value" type="xsd:decimal"/&gt;
	&lt;/xsd:sequence&gt;
&lt;/xsd:complexType&gt;
			</pre>
			
</div>
		
<a name="N10054"></a><a name="other"></a>
<div class="h3">
<h3>Other examples</h3>
			
			
<p>For other examples of annotations on this site see here: <a href="inheritance.html">Inheritance</a> and 
			<a href="jpox_details.html">Associations</a>.</p>
		
</div>
	
</div>
</div>
</div>
</td>
</tr>
</table>
<div width="100%" id="footer">
<table width="100%" cellpadding="4" cellspacing="0" border="0">
<tr>
<td class="footer"><a href="license.html">
          Copyright &copy; 2006 The Elver Project</a>
      - All rights reserved.
      </td>
</tr>
</table>
</div>
</body>
</html>
