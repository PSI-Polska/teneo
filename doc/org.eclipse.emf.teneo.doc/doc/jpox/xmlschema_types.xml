<?xml version="1.0" encoding="UTF-8"?>
<!--
	Copyright 2005-2006, Elver.org (http://www.elver.org).

	Licensed under the Apache License, Version 2.0 (the "License");
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at

		http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software
	distributed under the License is distributed on an "AS IS" BASIS,
	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	See the License for the specific language governing permissions and
	limitations under the License.
-->

<!--
	@author <a href="mtaal@elver.org">Martin Taal</a>
	@version $Revision: 1.1 $ $Date: 2006/08/03 09:58:07 $
-->

<!DOCTYPE document PUBLIC
	"-//APACHE//DTD Documentation V2.0//EN"
	"http://forrest.apache.org/dtd/document-v20.dtd">

<document> 
	<header> 
		<title>XML Schema Date and Time Types</title> 
		<abstract>Discusses a number of specific aspects of XML Schema Date and Time types and their mapping to EMF and JPOX.</abstract>
	</header> 
	<body>
		<section>
			<title>XML Schema Date type</title>
			<p>In general a XML Schema dateTime type maps to a java.util.Date. However when 
				defining an XML Element with the type dateTime EMF will generate getter/setters which
				return/use a general java.lang.Object instead of the specific java.util.Date. To prevent this
				the dateTime type has to be encapsulated in a separate simpleType definition with
				the ecore:instanceClass attribute:</p>
			<source><![CDATA[
<simpleType ecore:instanceClass="java.util.Date" name="Date">
	<restriction base="dateTime"/>
</simpleType>
			]]></source>
			<p>This simpletype can then be used as follows (with the this namespace mapped to the
			schema of the above simpleType):</p>
			<source><![CDATA[
<xsd:element name="mydata" type="this:Date"/>				
			]]></source>
			<p>With this XML Schema, EMF will generate getter/setters which use the java.util.Date
			type.</p>
		</section>
		<section>
			<title>XML Schema gYear, gYearMonth, etc. type</title>
			<p>To handle the gYear, gYearMonth types EMF uses the special object 
				org.eclipse.emf.ecore.xml.type.internal.XMLCalendar. This class is for example used by
				the generated EMF editors. The EMF - JPOX integration supports the persistency of 
				this class in case maxOccurs="1" (or 0).</p>
			<p>When an element is defined directly with type gYear, gYearMonth, etc. EMF will generate
				getters/setters which use java.lang.Object. The persistency layer requires the actual
				object type to be used in the getters/setters. To accomplish this the 
				gYear (or the other g-types) should be encapsulated in a simpleType definition
				with the ecore:instanceClass attribute set to org.eclipse.emf.ecore.xml.type.internal.XMLCalendar:
			</p>
			<source><![CDATA[
<simpleType ecore:instanceClass="org.eclipse.emf.ecore.xml.type.internal.XMLCalendar" name="GYear">
	<restriction base="gYear"/>
</simpleType>
			]]></source>
			<p>With this simpleType definition EMF will generate getter/setters which use the XMLCalendar type.</p>
		</section>
		<section>
			<title>XML Schema duration type</title>
			<p>To handle the duration type EMF uses the special object 
				org.eclipse.emf.ecore.xml.type.internal.XMLDuration. The EMF - JPOX integration supports the persistency of 
				this class in case maxOccurs="1" (or 0).</p>
			<p>When an element is defined directly with type duration EMF will generate
				getters/setters which use java.lang.Object. The persistency layer requires the actual
				object type to be used in the getters/setters. To accomplish this the 
				duration type should be encapsulated in a simpleType definition
				with the ecore:instanceClass attribute set to org.eclipse.emf.ecore.xml.type.internal.XMLDuration:
			</p>
			<source><![CDATA[
<simpleType ecore:instanceClass="org.eclipse.emf.ecore.xml.type.internal.XMLDuration" name="Duration">
	<restriction base="duration"/>
</simpleType>
			]]></source>
			<p>With this simpleType definition EMF will generate getter/setters which use the XMLDuration type.</p>
		</section>
	</body>
</document>
