<?xml version="1.0"?>
<!--
	Copyright (c) 2005, 2006 Springsite BV (The Netherlands) and others
	All rights reserved. This program and the accompanying materials
	are made available under the terms of the Eclipse Public License v1.0
	which accompanies this distribution, and is available at
	http://www.eclipse.org/legal/epl-v10.html
-->
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN" "http://forrest.apache.org/dtd/document-v20.dtd">
<document> 
  <header> 
    <title>Download and Install</title> 
    <notice>Describes the steps to install jpox and the jpox emf integration.</notice>
    <abstract>The installation consists of the steps listed below.
    </abstract> 
  </header> 
  <body> 
	  <section id="emf">
      <title>EMF Installation</title>
     	<p>EMF can be installed in Eclipse using the Eclipse update manager. 
			 See <a href="http://eclipse.org/emf/docs.php?doc=docs/UsingUpdateManager/UsingUpdateManager.html">here</a> for more information.
			 It is best to install the EMF SDK 2.2.* which contains the complete bundle with emf, xsd and sdo. 
		</p>
	 </section>
    <section>
     	<title>EMF - JPOX Persistency Plugin Installation</title>
		<p> The EMF Persistency plugin can be downloaded from the eclipse.org/emft update site. 
			To configure this update site in Eclipse go to: <em>Help &gt; Software Updates &gt; Find and Install</em>. Select
			'Search for new features to install' and click next.
		</p>
		<p> At this window create a new update site by clicking
			on 'New Remote Site'. Enter any name you want, as a url enter: <em>http://download.eclipse.org/technology/emft/updates/site-interim.xml</em>, 
			and press ok. 
			</p>
		<p>Select the newly created update site and press finish. When the update site contents are shown, select the 
			Teneo EMF Persistency (possibly followed by version information) Feature.</p>
		<p>The feature consists of a number of plugins: org.eclipse.emf.teneo.jpox.eclipse and org.eclipse.emf.teneo.jpox. The first plugin contains the OR Mapper which
			generates jdo descriptor files. The second plugin contains the jar files for the EMF persistency runtime. 
			</p>
			<p>After you have installed the plugin and restarted eclipse you will see a new menu entry called Teneo when 
			you right click on an ecore file.
			</p>
			<p><em>Note, if you have a earlier version of the EMF persistency plugin installed then you it is possible that 
			you need to manually disable the previous version of the EMF - JPOX feature, see <a href="upgrading.html">here</a>.</em></p>
	</section>
	  	 <section>
		 <title>JPOX Libraries</title>
			<p>The EMF persistency feature does not contain the JPOX libraries (and its dependencies). 
			Please download the JPOX libraries separately from: <a href="http://www.jpox.org">the JPOX website</a>.</p>
			<p><strong>A common approach is to place the JPOX libraries in a separate plugin on which your model plugin will depend.
			If you do this then you should also set the BuddyPolicy in the plugin containing the JPOX jars (in the Manifest.MF), 
			for example: Eclipse-BuddyPolicy: dependent.</strong></p>
	 </section>
	  
	  <section id="jpoxplugin">
      <title>JPOX - Eclipse Enhancement Tool</title>
     	<p>
		  	JPOX delivers a plugin to automatically enhance class files after a package.jdo has been generated.
		  	This jpox - eclipse plugin can be downloaded from the jpox website <a href="http://www.jpox.org/docs/download.html">here</a>.
		  	After unzipping the JPOX zip file and placing it in the Eclipse plugin directory, restart Eclipse.
			There should be an extra menu entry called JPOX when you right click on an ecore file..
			<em>If this menu options is not shown then please read the following: 
			<a href="jpox_plugin_error.html">known issue JPOX plugin and Eclipse 3.1</a>.</em>
		</p>
		<p>
			As a final step the classpath of the jpox plugin has to be set. This is done
			in Eclipse <em>Window &gt; Preferences &gt; JPOX Eclipse Plugin &gt; Classpath Settings</em>. 
			There are two methods: 1) add specific jar files (can be found in the org.elver.store.jpox.runtime plugin) to the plugins, or
			2) check 'use project classpath when running tools'. This last option is the easiest as you probably only need to
			specify the log4j jar separately.
		</p>
	</section>

	<section id="emfjpoxruntime">
     	<title>Using the EMF - JPOX Runtime plugin</title>
		<p>The installed runtime plugin (org.eclipse.emf.teneo.jpox) can be used in two ways: 
			1) in an EMF model plugin, 2) in a non-plugin project. </p>
		<section>
			<title>Using the runtime plugin in an EMF model plugin</title>
			<p>To use the runtime plugin in an EMF model plugin go through the following steps (in this order):</p>
			<ol>
				<li>In the plugin.xml, dependency tab, of the EMF model plugin project add a dependency to 
				the EMF persistency plugin (org.eclipse.emf.teneo.jpox)</li>
				<li>In case also an EMF editor project was generated the org.eclipse.emf.teneo.jpox 
					plugin also needs to be added to the dependencies of the editor plugin.</li>				
				<li>Right click on the EMF model project and in the JPOX menu choose 'Add JPOX Support'.
				Next check 'Enable Auto-Enhancement' in the same JPOX menu</li>
				<li>Add a JDBC driver to the EMF editor (or the model) plugin project</li>
			</ol>
			<p>Note: see <a href="troubleshooting.html#Build+path+contains+duplicate+entries">here</a> if you 
				get the following message in the problem view: <em>build path
				contains duplicate entry: ....</em>.</p>
		</section>
		<section>
			<title>Using the runtime layer in a non-plugin EMF project</title>
			<p>In case of a non-plugin project the jar files present in the following plugins 
			need to be added to the classpath (in addition to the jpox jars):</p>
			<ul>
		<li>org.eclipse.emf.teneo</li>
		<li>org.eclipse.emf.teneo.annotations</li>
		<li>org.eclipse.emf.teneo.jpox (note: there are two jar files in this plugin, both are required)</li>
		</ul>
			<p>In addition a jdbc driver should be added to the classpath.</p>
		</section>
	</section>
  </body> 
</document>